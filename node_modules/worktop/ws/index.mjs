// packages/worktop/src/internal/ws.ts
import { STATUS_CODES as o } from "worktop/response";
import { byteLength as r } from "worktop/utils";
function n(t) {
  let e = o[t];
  return new Response(e, {
    status: t,
    statusText: e,
    headers: {
      Connection: "close",
      "Content-Type": "text/plain",
      "Content-Length": "" + r(e)
    }
  });
}

// packages/worktop/src/ws.ts
function p(t) {
  if (t.method !== "GET")
    return n(405);
  let e = t.headers.get("upgrade");
  if (e !== "websocket")
    return n(426);
  if (e = (t.headers.get("sec-websocket-key") || "").trim(), !/^[+/0-9A-Za-z]{22}==$/.test(e))
    return n(400);
  if (e = t.headers.get("sec-websocket-version"), e !== "13")
    return n(400);
}
export {
  p as connect
};
